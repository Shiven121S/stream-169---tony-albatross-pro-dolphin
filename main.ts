namespace SpriteKind {
    export const Ring = SpriteKind.create()
    export const RingBack = SpriteKind.create()
    export const Collectible = SpriteKind.create()
    export const Bird = SpriteKind.create()
}
scene.onHitWall(SpriteKind.Player, function (sprite, location) {
    currentSpeed = 90
})
function do_score () {
    info.changeScoreBy(barrel_roll_count * 200)
    if (flip_count) {
        info.changeScoreBy(-10)
    }
    if (touched_space) {
        if (flip_count) {
            info.changeScoreBy(-20)
        } else if (sloppy) {
            info.changeScoreBy(20)
        }
    }
    if (sloppy) {
        info.changeScoreBy(10)
    }
    sloppy = false
    barrel_roll_count = 0
    flip_count = 0
    touched_space = false
}
function setIsUnderTheSea (underwater: boolean) {
    if (underwater) {
        if (!(areWeUnderTheSea)) {
            controlLockEndTime = game.runtime() + 500
            // timer.after(1000, function () {
            // do_score()
            // })
            if (sloppy || (barrel_roll_count || flip_count)) {
            	
            }
        }
        dolphinBody.fx = 100
        dolphinBody.ay = 0
    } else {
        dolphinBody.fx = 0
        dolphinBody.ay = 200
    }
    areWeUnderTheSea = underwater
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    // console.log('End Stunt')
    if (statusbar.value > 0) {
        // console.log('Start Stunt')
        do_a_stunt()
    }
})
function createEdibleFish () {
    edibleFishImages = [
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 5 5 5 8 8 5 . . . . . 
        . . . 5 5 5 5 5 8 8 8 5 . . . 5 
        . . 5 5 5 5 5 5 5 8 8 5 8 . . 5 
        . 5 5 f 5 5 5 f 5 8 8 5 5 8 5 5 
        5 5 5 5 5 5 5 5 5 8 8 8 5 8 5 . 
        5 5 5 5 f f f 5 5 8 8 5 5 8 5 5 
        . 5 5 5 5 5 5 5 5 8 8 5 8 . 5 5 
        . . . 5 5 5 5 5 8 8 8 5 8 . 5 5 
        . . . . . 5 5 5 8 8 5 8 . . . 5 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 4 4 1 4 4 . 4 4 . . . . 
        . . . 4 4 4 1 1 4 1 4 . . . . . 
        . . 4 f 4 f 4 1 4 1 4 . . . . . 
        . . . 4 4 4 1 4 . . 4 4 . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . b a a . . . . . 
        . . . . . . . b a a . . . . . . 
        . . . . . . b b a a a . . . a . 
        . . . . . . a a a a a . . a 3 . 
        . . . . . a a a a a a . a 3 . . 
        . a a a a f a a f a a a a . . . 
        . c c c a a a a a a 3 a a . . . 
        . . . . a a a a a a 3 a a . . . 
        . . . . c c a a a 3 a a a . . . 
        . . . . . c c a 3 a a a a a . . 
        . . . . . . c c a a a . 3 a . . 
        . . . . . . c c a a a . . 3 3 . 
        . . . . . . . c a a a . . . 3 . 
        . . . . . . . . c a c . . . . . 
        . . . . . . . . . c c c . . . . 
        . . . . . . . . . . . c c . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . 7 7 . . . . . . . 7 7 
        . . 7 7 7 7 7 5 7 5 7 . 7 7 7 . 
        7 7 f 7 f 7 7 5 7 5 7 5 7 . . . 
        . 7 7 7 7 7 7 5 7 5 7 5 7 . . . 
        . . . . 8 8 7 . . . . . 7 7 . . 
        . . . . . . 8 . . . . . . 7 7 7 
        . . . . . . . . . . . . . . . 7 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . a a a a a . . . . . . 
        . . . a a a a f a a a . . . . . 
        8 a a a f a a a a a a a . . a a 
        8 8 a a a a a a a a 8 a a a 8 . 
        8 8 8 8 8 8 a a 8 a a 8 a 8 a . 
        . . . . 8 8 8 8 8 8 8 a . . a a 
        . . . . . 8 8 8 8 8 8 . . . . a 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . 2 . . . . . . . . . 
        . . . . 2 2 2 2 2 . 2 . . . . . 
        . . . 2 2 e 2 e e e 2 . . . . . 
        . . . . . . e . . . 2 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 5 8 5 . . . . . . . . . 
        . . . . 5 5 8 5 . 5 . . . . . . 
        . . . 5 5 5 8 5 8 . . . . . . . 
        . . . 5 5 5 8 5 8 . . . . . . . 
        . . . . 5 8 5 . . 5 . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 9 . . . . . . . . 
        . . . . . 7 9 9 9 9 . . 7 . . . 
        . . . . 7 7 7 7 7 7 7 7 . . . . 
        . . . . . 7 7 7 7 7 . . 7 . . . 
        . . . . . . . 7 . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `
    ]
    edibleFishImagesRight = []
    for (let value of edibleFishImages) {
        flippedImage = value.clone()
        edibleFishImagesRight.push(flippedImage)
        flippedImage.flipX()
    }
    edibleFish = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Food)
    sprites.setDataNumber(edibleFish, "imageIndex", randint(0, edibleFishImages.length - 1))
    sprites.setDataBoolean(edibleFish, "facingLeft", Math.percentChance(50))
    tiles.placeOnTile(edibleFish, getOffscreenOceanTile())
    updateEdibleFishDirection(edibleFish)
}
scene.onOverlapTile(SpriteKind.Food, assets.tile`tile2`, function (sprite, location) {
    sprite.vy = Math.abs(sprite.vy)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile3`, function (sprite, location) {
    setIsUnderTheSea(false)
})
info.onCountdownEnd(function () {
    GameStarted = false
    if (areWeUnderTheSea) {
        do_score()
    }
    game.over(true)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Collectible, function (sprite, otherSprite) {
    otherSprite.destroy(effects.confetti, 500)
    acellerationBoost += 1
})
function Music () {
    music.playTone(294, music.beat(BeatFraction.Half))
    music.playTone(466, music.beat(BeatFraction.Half))
    music.playTone(392, music.beat(BeatFraction.Half))
    music.playTone(466, music.beat(BeatFraction.Half))
    music.playTone(392, music.beat(BeatFraction.Half))
    music.playTone(294, music.beat(BeatFraction.Half))
    music.playTone(392, music.beat(BeatFraction.Half))
    music.playTone(294, music.beat(BeatFraction.Half))
    music.playTone(466, music.beat(BeatFraction.Half))
    music.playTone(294, music.beat(BeatFraction.Half))
    music.playTone(392, music.beat(BeatFraction.Half))
    music.playTone(294, music.beat(BeatFraction.Half))
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile1`, function (sprite, location) {
    setIsUnderTheSea(true)
})
function getOffscreenOceanTile () {
    tileList = tiles.getTilesByType(assets.tile`tile1`)
    tileToCheck = tileList.removeAt(randint(0, tileList.length - 1))
    while (!(tiles.locationXY(tileToCheck, tiles.XY.right) < dolphinBody.x - 80 || tiles.locationXY(tileToCheck, tiles.XY.left) > dolphinBody.x + 80)) {
        tileToCheck = tileList.removeAt(randint(0, tileList.length - 1))
        console.log("Inside while loop:" + i)
        i = i + 1
    }
    return tileToCheck
}
function updateEdibleFishDirection (fish: Sprite) {
    if (sprites.readDataBoolean(fish, "facingLeft")) {
        fish.setImage(edibleFishImages[sprites.readDataNumber(fish, "imageIndex")])
        fish.setVelocity(-5, randint(-5, 5))
    } else {
        fish.setImage(edibleFishImagesRight[sprites.readDataNumber(fish, "imageIndex")])
        fish.setVelocity(5, randint(-5, 5))
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    console.log("On overlap start")
    currentSpeed += 50
    otherSprite.destroy(effects.disintegrate, 500)
    for (let index = 0; index < 3; index++) {
        dolphin.startEffect(effects.trail, 500)
    }
    console.log("On overlap End")
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile10`, function (sprite, location) {
    touched_space = true
})
function moveTowardsAngle (degrees: number) {
    if (Math.abs(direction - degrees) < 180) {
        if (direction < degrees) {
            direction += 5
        } else if (direction > degrees) {
            direction += -5
        }
    } else {
        if (direction < degrees) {
            direction += -5
        } else if (direction > degrees) {
            direction += 5
        }
    }
    if (direction < 0) {
        direction += 360
    }
    if (direction > 360) {
        direction += -360
    }
    spriteutils.setVelocityAtAngle(dolphinBody, spriteutils.degreesToRadians(direction), currentSpeed)
    currentSpeed += 1 + acellerationBoost / 5
}
function do_a_stunt () {
    if (titleHidden) {
        if (!(doingATrick)) {
            if (!(areWeUnderTheSea)) {
                timer.background(function () {
                    // console.log('Do stunt')
                    doingATrick = true
                    if (dolphinBody.vy < -200) {
                        animation.runImageAnimation(
                        dolphin,
                        [img`
                            ................................
                            ........bb......................
                            ........bbd.....................
                            .......bbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            .....bbbbfb.....................
                            ....bbbbbbbb....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbbb..................
                            ...bbbbbbbbbbb..................
                            ..bbbbbbbbbbbb..................
                            ..bbbbbbbbbb.bb.................
                            ..bbdbbbbbbb....................
                            ..bbdbbbbbbb....................
                            ..bbdbbbbbbb....................
                            .bbbdbbbbbb.....................
                            .bbb.bbbbbb.....................
                            ..b..bbbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            .......bbbb.....................
                            ........bbb.....................
                            ........bbbb....................
                            .......bbbbb....................
                            ......bbbbbb....................
                            ......bb.bbb....................
                            .....bb...bb....................
                            ................................
                            `,img`
                            ................................
                            .......bb.......................
                            .......bb.......................
                            ......bbbb......................
                            ......bbbb......................
                            .....bbbbbb.....................
                            ....bfbbbbfb....................
                            ....bbbbbbbb....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ..bbbbbbbbbbbb..................
                            .bbbbbbbbbbbbb..................
                            .bbbbbbcbbbbbbb.................
                            bbbbbbbcbbbbbbb.................
                            bbbbbbbcbbbbbbbb................
                            bbbbbbbcbbbbbbbb................
                            bbb.bbbcbbbb.bbb................
                            bb...bbbbbbb...b................
                            .....bbbbbb.....................
                            .....bbbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            ......bbbb......................
                            .....bbbbbb.....................
                            .....bbbbbbb....................
                            ....bbbbbbbbb...................
                            ...bbbb..bbbbb..................
                            ..bbb.....bbb...................
                            ................................
                            `,img`
                            ................................
                            .......db.......................
                            ......ddb.......................
                            ......ddb.......................
                            .....dbbb.......................
                            .....dbbbbb.....................
                            .....dbbbfb.....................
                            ....dbbbbbb.....................
                            ....dbbbbbbb....................
                            ...bdbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbbb..................
                            ...bbbbbbbbbbb..................
                            ..bbbbbbbbbbbb..................
                            ..bbbbbbbbbdbbb.................
                            .bbbbbbbbbbdbbb.................
                            .bbbbbbbbbbddbb.................
                            .bbbbbbbbbbbdbb.................
                            bbb.bbbbbbbb..b.................
                            b...bbbbbbbb....................
                            ....bbbbbbbb....................
                            .....bbbbbb.....................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbbb.....................
                            .....bbbbbb.....................
                            ......bbbbb.....................
                            ......bbb.bb....................
                            ......bbb..bb...................
                            .......bb.......................
                            `,img`
                            ...ddb..........................
                            ...ddb..........................
                            ...ddbb.........................
                            ...ddbb.........................
                            ...ddbbbb.......................
                            ...dddbbbfb.....................
                            ...ddddbbbbb....................
                            ...dddddbbbb....................
                            ...ddddddbbbb...................
                            ...dddddddbbb...................
                            ...ddddddddbb...................
                            ...ddddddddbb...................
                            ...ddddddbbbb...................
                            ...ddddddbbbbb..................
                            ..bdddddddbbbbbb................
                            ..bbdddddddbbbbbb...............
                            ..bbdddddddbb..bbb..............
                            .bbbdddddddbb...................
                            .b..dddddddbb...................
                            ....ddddddbbb...................
                            ....ddddddbbb...................
                            ....ddddddbb....................
                            ....dddddbbb....................
                            .....ddddbb.....................
                            .....ddddbb.....................
                            .....ddddbb.....................
                            .....bbbbbb.....................
                            ....bbbbbbb.....................
                            ....bbbbbbb.....................
                            ...bbbb.bbb.....................
                            ..bbbb..bbbb....................
                            ..bbb.....bb....................
                            `,img`
                            ........bbd.....................
                            ........bbd.....................
                            ........bbd.....................
                            .......bbdd.....................
                            .......bbdd.....................
                            .....bbbdddd....................
                            ....bfbbdddd....................
                            ...bbbdddddd....................
                            ..bbbbdddddd....................
                            ..bbbddddddd....................
                            ..bbbddddddd....................
                            .bbbbddddddd....................
                            .bbbbddddddd....................
                            ..bbbdddddddb...................
                            ..bbbbddddddbb..................
                            ..bbbbddddddbbb.................
                            ..bbbbddddddbbbb................
                            ..bbbbdddddd...b................
                            ...bbbbddddd....................
                            ...bbbbdddd.....................
                            ...bbbbdddd.....................
                            ...bbbbdddd.....................
                            ....bbbddd......................
                            ....bbbddd......................
                            .....bbddd......................
                            .....bbbd.......................
                            .....bbbd.......................
                            .....bbbb.......................
                            ...bbbbbb.......................
                            ..bbbbbbbb......................
                            ..bbbb..bbb.....................
                            ................................
                            `,img`
                            ................................
                            ........bd......................
                            ........bdd.....................
                            ........bdd.....................
                            ......bbbdd.....................
                            .....bbfbdd.....................
                            .....bbbbdd.....................
                            ....bbbbbdd.....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbddbbb..................
                            ..bbbbbbbdd.bb..................
                            .bbbbbbbbdd..b..................
                            .bbbbbbbbdd.....................
                            bbbbbbbbbdd.....................
                            bbbbbbbbbdd.....................
                            bbb.bbbbbdd.....................
                            bb...bbbbdd.....................
                            b....bbbbbd.....................
                            ......bbbbd.....................
                            .......bbbd.....................
                            .......bbbb.....................
                            ........bbb.....................
                            ........bbb.....................
                            ........bbbb....................
                            .......bbbbbb...................
                            .......bbb.bbb..................
                            .......bb...bbb.................
                            ......bb......b.................
                            `],
                        100,
                        false
                        )
                        pause(500)
                        barrel_roll_count += 1
                    } else if (dolphinBody.vy > 0) {
                        if (dolphinBody.vx >= 0) {
                            statusbar.value += -1
                            animation.runImageAnimation(
                            dolphin,
                            dolphin_image,
                            50,
                            false
                            )
                        } else {
                            statusbar.value += -1
                            animation.runImageAnimation(
                            dolphin,
                            backflip_images,
                            50,
                            false
                            )
                        }
                        pause(500)
                        if (areWeUnderTheSea) {
                            sloppy = true
                        } else {
                            flip_count += 1
                        }
                    }
                    doingATrick = false
                })
            }
        }
    }
}
/**
 * barrel roll
 * 
 * flip 360
 * 
 * barrel roll + flip 360
 */
/**
 * Dolphin movement:
 * 
 * 1. underwater - no gravity
 * 
 * 2. above water - gravity
 * 
 * 3. momentum
 * 
 * 4. large turn radius
 */
let Music_Playing = false
let doingATrick = false
let i = 0
let tileToCheck: tiles.Location = null
let tileList: tiles.Location[] = []
let acellerationBoost = 0
let edibleFish: Sprite = null
let flippedImage: Image = null
let edibleFishImagesRight: Image[] = []
let edibleFishImages: Image[] = []
let controlLockEndTime = 0
let areWeUnderTheSea = false
let sloppy = false
let touched_space = false
let flip_count = 0
let barrel_roll_count = 0
let currentSpeed = 0
let starman: Sprite = null
let ringFront: Sprite = null
let ringBack: Sprite = null
let direction = 0
let dolphin_image_temp: Image = null
let backflip_images: Image[] = []
let dolphin_image: Image[] = []
let dolphinBody: Sprite = null
let dolphin: Sprite = null
let statusbar: StatusBarSprite = null
let titleHidden = false
let GameStarted = false
let bird = null
GameStarted = false
let title = sprites.create(img`
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911
    11111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bbbb9999999999
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bcccc9999999999
    111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bccccc9999999999
    91111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bcccccc9999999999
    9111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999bccccccc9999999999
    999999999999999999999999999999999999999999999999999999999999999111111111111111111111999999999999999999999999999999999999999999999999999999999bcccccccc9999999999
    99999999999999999999999999999999999999999999999999999991111111111111111111111111111111199999999999999999999999999999999999999999bbb999999999bcccccccc99999999999
    99999999999999999999999999999999999999999999999999111111111111111111111111111111111111111119999999999999999999999999999999999999cccbbbb9999bcccccccc999999999999
    99999999999999999999999999999999999999999911111111111111111111111111111111111111111111111111111111119999999999999999999999999999cccccccbbbbcccccccc9999999999999
    99999999999999999999999999999999999111111111111111111111111111111111111111111111111111111111111111111119999999999999999999999999cccccccccccccccccc99999999999999
    99999999999999999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999999ccccccccccccccccc999999999999999
    999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111999999999999999999ccccccccccccccc9999999999999999
    999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111119999999999999999cccccccccccccc99999999999999999
    9999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111119999999999991cccccccccccc999999999999999999
    99999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111119999999911cccccccccccd99999999999999999
    999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111119999999111ccccccccccd99999999999999999
    9999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cccccccccdd9999999999999999
    99999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccccccccddd999999999999999
    999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cccccccdddd99999999999999
    999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cccccccddddd9999999999999
    9999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccccccddddd9999999999999
    9999999999999999111111111111ffff1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fff1111111111111cccccccddddd999999999999
    9999999999999999111111111fffffffff1111111111111111111111111111111111111111111111111111111111111111111111111fff1111111111fff11111111111111ccccccddddd999999999999
    999999999999999911111111fffffffffff111111111111111111111111111111111111111111111111111111111111111111111111fff1111111111fff11111111111111cccccccddddd99999999999
    999999999999999911111111fffffffffff11111111111111111111111111111fff1111111111111111111111111fff111111111111fffffffff1111111111ffffff11111cccccccddddd99999999999
    999999999999999991111111ffff111ffff11111111111111111111111111111fff111111111111111ffffff1111ffff111fff11111ffffffffff111111111fffffff1111ccccccccdddd99999999999
    999999999999999991111111fff11111ffff111111111111fffff11111111111fffff111111111111ffffffff111ffff111fffff111fffffffffff11fff11ffffffff11111cccccccddddd9999999999
    999999999999999991111111fff1111fffff11111111111fffffff1111111111ffffff111111111fffffffffff111fff111ffffff111fffff1ffff11fff11ffffffff11111cccccccddddd9999999999
    999999999999999999111111fff11fffffff11111111111fffffffff11111111ffffffff1111111fffff11fffff11fff111fffffff11ffff111ffff1fff11ffff1fff11111cccccccddddd9999999999
    999999999999999999111111ffffffffffff11111111111ffffffffff1111111ffffffffff11111fffff111ffff11fff111fffffff11ffff111ffff1fff11fff11ffff1111ccccccccdddd9999999999
    999999999999999999111111fffffffff111111ffffff111fff1fffff1111111fff1fffffff1111ffff11111fff11fff111fff1fff11ffff111ffff1fff11fff11ffff1111ccccccccdddd9999999999
    999999999999999999911111fffffff111111ffffffff111fff111fff1111111fff111fffff1111ffff11111fff11fff111fff1ffff1fff11111fff1fff11fff11ffff1111ccccccccdddd9999999999
    999999999999999999911111ffff11111111fffffffff111fff111fff1111111ffff1111ffff111ffff11111fff11fff111ffffffff1fff11111fff1fff11fff111111111bccccccccdddd9999999999
    999999999999999999911111ffff11111111fffff1fff111fff111fff1ccccc1ffff1111fffff11fffff111ffff11fff111ffffffff1fff11111fff1fff11fff1111111bbcccccccccdddd9999999999
    9999999999999999999911111fff11111111ffff11111111ffff11fff1ccccc11fff11111ffff111ffffff1ffff11fff111ffffff111fff111111111fff111111111111cccccccccccdddd9999999999
    9999999999999999999911111fff11111111ffff11111111ffff11fff11111111fff11111ffff1111fffffffff111fff111fffff1111111111111111fff111111111111cccccccccccdddd9999999999
    9999999999999999999991111fff11111111ffff11111111fffffffff11111111fff11111ffff11111ffffffff111fff111fff111111111111111111fff11111111111bcccccccccccdddd9999999999
    999999999999999999999911111111111111ffff111111111ffffffff11111111fff1111ffff11111111fffff1111fff111fff111111111111111111111111111111bbccccccccccccdddd9999999999
    999999999999999999999911111111111111ffff1111111111fffffff11111111fff111fffff11111111111111111111111fff111111111111111111111111111bbbccccccccccccccdddd9999999999
    999999999999999999999991111111111111ffff111111111111fff1111111111fff111ffff111111111111111111111111fff111111111111111111111111bbbcccccccccccccccccdddd9999999999
    999999999999999999999999111111111111ffff111111111111111111111111ffffffffff1111111111111111111111111111111111111111111bbbbbbbbbccccccccccccccccccccdddd9999999999
    999999999999999999999999111111111111fff1111111111111111111111111ffffffffff111111111111111111111111111111111111111bbbbcccccccccccccccccccccccccccccdddd9999999999
    999999999999999999999999911111111111fff1111111111111111111111111fffffffff1111111111111111111111111111111111111bbbccccccccccccccccccccccccccccccccccddd9999999999
    99999999999999999999999999111111111111111111111111111111111111111fffff11111111111111111111111111111111111111bbcccccccccccccccccccccccccccccccccccccddd9999999999
    99999999999999999999999999911111111111111111111111111111111111111fff11111111111111111111111111111111111111bbcccccccccccccccccccccccccccccccccccccccddd9999999999
    999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111fffffcccccccccccccccccccccccccccccccccccccccddd99999999999
    999999999999999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111ffffffffffffccccccccccccccccccccccccccccccccddd99999cc9999
    999999999999999999999999999999999999911111111111111111111111111111111111111111111111111111bbb1111111bbfffffcfff1fffffffffcccccccccccccccccccccccccbdd999ccccc999
    999999999999999999999999999999999999999911111111111111111111111111111111111111111111111111cccb1111bbccccfffcffff1fcccccccfccccccccccccccccccccccccccccccccccc999
    999999999999999999999999999999999999999999999911111111111111111111111111111111111111111111dddcbbbbcccccccccccfffffcccccccccccccccccccccccccccccccccccccccccc9999
    999999999999999999999999999999999999999999999999911111111111111111111111111111111111111111ddddcccccccccccccccffffcccccccccccccccccccccccccccccccccccccccc9999999
    9999999999999999999999999999999999999999999999999999911111111111111111111111111111111111999ddddcccccccccccccccccccccccccccccccccccccccccccccccccccccccc999999999
    99999999999999999999999999999999999999999999999999999999999991111111111111111111999999999999dddddcccccccccccccccccccccccccccccccccccccccccccccccccccc99999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddcccccccccccccccccccccccccccccccccccccccccccccc99999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddcccccccccccccccccccccccccccccccccccccccccc9999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddcccccccccccccccccdddddddccccccccccc99999999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddddddddddddddddddddddddcccccccc99999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddddddddddddddddddddddd9999999999999999999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddddddddddddddddddddddd9999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999991111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999991111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999991111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999991111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111
    9999999999991111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111
    9999999999999999111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111111
    9999999999999999911111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111
    9999999999999999991111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999999991111111111111111199999999999999999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999999911111111111111111111111119999999999999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999999911111111111111111111111111111199999999999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999999911111111111111111111111111111111111199999999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999999911111111111111111111111111111111111111111999999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111119999999999999999999999999999999111111111111111111111111111111111111111111111
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111111199999999999999999999999999999111111111111111111111111111111911111111111111
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111111111999999999999999999999999999111111111111111111111111111119999111111111111
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111111111199999999999999999999999999111111111111111111111111111119999999111111111
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111111111111999999999999999999999999911111111111111111111111111199999999999999999
    9999999999999999999999999999999999999991111111111111111111111111111111111111111111111111111199999999999999999999999991111111111111111111111111999999999999999999
    9919999999999999999999999999999999999991111111111111111111111111111111111111111111111111111199999999999999999999999999991111111111111111111999999999999999999999
    1111199999999999999999999999999999999999111111111111111111111111111111111111111111111111111199999999999999999999999999999999111111111999999999999999999999999999
    1111111999991111119999999999999999999999111111111111111111111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111199999999999999999999111111111111111111111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111999999999999999999111111111111111111111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111119999999999999999911111111111111111111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111999999999999999991111111111111111111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111199999999999999991111111111111111111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111199999999999999999111111111111111111111111111111911111111111111119999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111999999999999999999991111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111991199999999999999999911111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    `, SpriteKind.Player)
pause(1000)
game.showLongText("Move with WASD or the ARROW KEYS. Jump above the water and press SPACE and ENTER in quick succession to do a trick. Bad tricks will give you points, while good tricks subtract points. Doing tricks will drain your energy. Your energy slowly recharges over time. If you reach the space zone will doing a trick and manage to do a trick, you will lose twice the points. Reaching space and doing a bad trick, will earn you twice the points. You have 60 seconds. Press SPACE to continue.", DialogLayout.Full)
title.destroy()
titleHidden = true
info.startCountdown(60)
statusbar = statusbars.create(20, 4, StatusBarKind.Health)
statusbar.value = 10
statusbar.max = 10
tiles.setTilemap(tilemap`level1`)
GameStarted = true
dolphin = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Player)
dolphin.setFlag(SpriteFlag.Ghost, true)
dolphinBody = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ..33333333333333................
    ..3333333333333333333333333333..
    .333333333333333333333333333333.
    .333333333333333333333333333333.
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    .333333333333333333333333333333.
    .333333333333333333333333333333.
    ..3333333333333333333333333333..
    ..3333333333333333333333333333..
    ...33333333333333333333333333...
    ....333333333333................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Player)
dolphinBody.setFlag(SpriteFlag.Invisible, true)
dolphin_image = [
img`
    .........bbbb...................
    .........bbbbbb.................
    ..........bbbbbbb....bbbbb......
    ...........bbbbbbbbbbbbbbbb.....
    ...........bbbbbbbbbbbbbbbbb....
    .b......bbbbbbbbbbbbbbbbbbbb....
    .bbb..bbbbbbbbbbbbbbbbbbbfbbb...
    ..bbbbbbbbbbbbbbbbbbbbbbbbbbbbb.
    ..bbbbbbbbbbbdddddbbbbbbbbddddd.
    ...bbbbbddddddddddddbbbbdddddd..
    ...bb.........ddddddbbbbd.......
    ..bb...............bbbb.........
    ..bb..............bbbb..........
    ..b..............bbb............
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `,
img`
    ............bb..................
    .......bb...bb..................
    .......bbbb.bb..................
    .........bbbbb..................
    ..........bbbb..................
    ...........bbbbb.......b........
    ............bbbbbb.....bb.......
    .............bbbbbbb...bb.......
    .............dbbbbbbb.bbb.......
    ..............ddbbbbbbbbb.......
    ...............ddbbbbbbbb.......
    ...............dddbbbbbbb.......
    ................dddbbbbbb.......
    .................dddbbbbbb......
    ..................dddbbbbbb.....
    ...................dddbbbbbbb...
    ...................dddbbbbbbbb..
    ...............bb...dddbbbbbbb..
    ...............bbbbbbbbbbbbbbbb.
    .................bbbbbbbbbbbbbb.
    ..................bbbbbbbbbbbbb.
    ....................bbbbbbbbbbb.
    .......................dbbbfbbb.
    .......................ddbbbbb..
    ........................ddbbb...
    .........................ddbb...
    .........................ddbb...
    ..........................dbb...
    ...........................db...
    ................................
    ................................
    ................................
    `,
img`
    ..................b......b......
    ..................bb....bb......
    ..................bbb..bb.......
    ...................bbbbbb.......
    ....................bbbb........
    .....................bb.........
    .....................bb.........
    .....................bbb........
    .....................bbb........
    .....................bbbb.......
    ....................dbbbb....bb.
    ....................dbbbb...bbb.
    ....................dbbbbbbbbbb.
    ...............b...ddbbbbbbbbb..
    ...............bb..ddbbbbbbbbb..
    ...............bbb.dbbbbbbbbb...
    ................bbbbbbbbbbbb....
    ................bbbbbbbbbbb.....
    .................bbbbbbbbbb.....
    ..................bbbbbbbbb.....
    ..................dbbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbfbbbb.....
    ..................ddbbbbbb......
    ..................ddbbbb........
    ...................dbb..........
    ...................dbb..........
    ...................dbb..........
    `,
img`
    ................................
    ................................
    ................................
    ................................
    ............................b...
    ............................b...
    ...........................bb...
    ...........................bb...
    ...........................bbbb.
    .........................bbbbbbb
    ........................dbbb....
    ......................ddbbb.....
    .....................dddbbb.....
    .............bb.....ddbbbb......
    .............bb...dddbbbbb......
    .............bb..dddbbbbbb......
    ............bbbddddbbbbbb.......
    ............bbbddbbbbbbb........
    ...........bbbbbbbbbbbbb........
    ...........bbbbbbbbbbbbbbbbbbbb.
    ...........bbbbbbbbbbbbbbbbbbb..
    ..........dbbbbbbbbbbbbbbbbb....
    .........ddbbbbbbbbbbbbbbbb.....
    ........dddbbbbbbbbb............
    .......dddbbbbbbbbb.............
    .......ddbbbbbbbbb..............
    ......ddbbbbbbbbbb..............
    .....ddbbfbbbbbbb...............
    .....dbbbbbbbbbb................
    ....ddbbbbbbbbb.................
    ....dbb...bbb...................
    ................................
    `,
img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ...............bb...............
    .............bbbb...............
    ............bbbb..............bb
    ...........bbbbbddddddddd...bbb.
    ..ddddddddbbbbbddddddddddddbbb..
    .dddddddbbbbbbbbbbbbbbbbbbbbb...
    .bbbbbbbbbbbbbbbbbbbbbbbbbbbbb..
    ..bbbbbfbbbbbbbbbbbbbbbbbbb..bbb
    .....bbbbbbbbbbbbbbbbbbbb.....bb
    .....bbbbbbbbbbbbbbbbbb.........
    .....bbbbbbbbbbbbbbbbbb.........
    .......bbbbbbbbbbbbbbbb.........
    ..........bbbbb....bbbbbb.......
    ....................bbbbbbb.....
    `,
img`
    ................................
    ................................
    ................................
    .bd.............................
    .bbd............................
    .bbbd...........................
    ..bbbd..........................
    ..bbbdd.........................
    .bbbfbddd.......................
    .bbbbbbbbbbb....................
    .bbbbbbbbbbbbbbbb...............
    .bbbbbbbbbbbbbbbbb..............
    ..bbbbbbbbbddbbbbb..............
    ..bbbbbbbbbdd...................
    ...bbbbbbbbddd..................
    ...bbbbbbbbbddd.................
    ...bbbbbbbbbddd.................
    ....bbbbbbbbbddd................
    .....bbbbbbbbbdd................
    ......bbbbbbbbbdd...............
    ......bbbbbbbbbbdd..............
    .....bbbbbbbbbbbbbb.............
    .....bbbbbbbbbbbbbb.............
    .....bbbbbbbbbbbbbbb............
    .....bbb...bbbbbbbbb............
    .....bbb....bbbbbbbbb...........
    .....bb.........bbbbbb..........
    ......b............bbbbbbb......
    ...................bbbbbbb......
    ...................bbb..........
    ....................b...........
    ....................b...........
    `,
img`
    ................................
    ........bd......................
    ........bdd.....................
    ........bdd.....................
    ......bbbdd.....................
    .....bbfbdd.....................
    .....bbbbdd.....................
    ....bbbbbdd.....................
    ....bbbbbbbb....................
    ...bbbbbbbbb....................
    ...bbbbbbbbbb...................
    ...bbbbbbbbbb...................
    ...bbbbbbbbbb...................
    ...bbbbbbddbbb..................
    ..bbbbbbbdd.bb..................
    .bbbbbbbbdd..b..................
    .bbbbbbbbdd.....................
    bbbbbbbbbdd.....................
    bbbbbbbbbdd.....................
    bbb.bbbbbdd.....................
    bb...bbbbdd.....................
    b....bbbbbd.....................
    ......bbbbd.....................
    .......bbbd.....................
    .......bbbb.....................
    ........bbb.....................
    ........bbb.....................
    ........bbbb....................
    .......bbbbbb...................
    .......bbb.bbb..................
    .......bb...bbb.................
    ......bb......b.................
    `,
img`
    ................................
    ..................bb............
    ................bbbbbb..........
    ...............bbbbbbbbbbbb.....
    .............bbbbbbbbfbbbdd.....
    ............bbbbbbbbbbbbdd......
    .......bbbbbbbbbbbbbbbbdd.......
    .....bbbbbbbbbbbbbbbbbdd........
    ...bbbbbbbbbbbbbbbbbbbd.........
    ...bbbbbbbbbbbbbbbbbbb..........
    .........bbbbbbbbbdbbb..........
    .........bbbbbbbdddbbb..........
    ........bbbbbbbddd.bb...........
    .......bbbbbbbddd..bb...........
    .......bbbbbddd....bb...........
    ......bbbbbddd.....bb...........
    ......bbbbddd......b............
    .....bbbbdd.....................
    .....bbbdd......................
    .bbbbbbb........................
    bbbbbb..........................
    ...bbb..........................
    ...bbb..........................
    ....bb..........................
    ....bb..........................
    ....bb..........................
    .....b..........................
    ................................
    ................................
    ................................
    ................................
    ................................
    `
]
backflip_images = []
for (let value2 of dolphin_image) {
    dolphin_image_temp = value2.clone()
    dolphin_image_temp.flipX()
    backflip_images.push(dolphin_image_temp)
}
direction = 0
dolphin.z = 5
scene.cameraFollowSprite(dolphinBody)
tiles.placeOnRandomTile(dolphinBody, assets.tile`tile20`)
for (let value3 of tiles.getTilesByType(assets.tile`tile7`)) {
    tiles.setTileAt(value3, assets.tile`tile3`)
    ringBack = sprites.create(img`
        ................................
        ......bbbbbbbbbbb...............
        ...bbbbcccccccccbbb.............
        ..bbcccc........ccbbb...........
        .bbcc.............cbbbb.........
        .bcc...............ccbbbb.......
        .....................ccbbb......
        .......................ccbb.....
        ........................cbbb....
        .........................ccbb...
        ...........................cbb..
        ...........................cbb..
        ............................cbb.
        ............................cbb.
        .............................cb.
        .............................cbb
        .............................cbb
        ..............................cb
        ..............................cb
        ..............................cb
        ..............................cb
        .............................cbb
        .............................cbb
        .............................cb.
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, SpriteKind.RingBack)
    ringBack.z = 6
    ringFront = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        .c..............................
        ccb.............................
        cb..............................
        cb..............................
        cb..............................
        cbb.............................
        ccbb............................
        cccb............................
        .ccb............................
        .ccb............................
        .ccbb...........................
        ..ccb...........................
        ..cccb..........................
        ...ccb..........................
        ...cccbb........................
        ....ccabb.......................
        .....caab.......................
        ......caab....................bc
        .......caab..................bbc
        .......ccabb................bccc
        ........caabb...............bcc.
        .........caabbb............bcc..
        ..........caaaabb........bbcc...
        ...........ccccaabbbbbbbbccc....
        ...............ccccccccccc......
        ..................cccccc........
        ................................
        ................................
        `, SpriteKind.Ring)
    ringFront.z = 3
    tiles.placeOnTile(ringBack, value3)
    tiles.placeOnTile(ringFront, value3)
}
for (let value4 of tiles.getTilesByType(assets.tile`tile21`)) {
    tiles.setTileAt(value4, assets.tile`tile3`)
    starman = sprites.create(img`
        9 9 9 9 9 9 9 9 4 9 9 9 9 9 9 9 
        9 9 9 9 9 9 9 9 4 5 9 9 9 9 9 4 
        9 9 9 9 9 9 9 4 5 5 9 9 9 9 4 5 
        9 9 9 9 9 9 9 4 5 5 9 9 4 4 5 9 
        4 4 9 9 9 9 9 4 5 5 9 4 5 5 5 9 
        5 5 4 4 9 1 1 1 5 1 1 1 5 5 9 9 
        9 5 5 5 4 1 f 1 5 1 f 1 5 5 9 9 
        9 9 5 5 5 1 f 1 5 1 f 1 9 9 9 9 
        9 9 9 5 5 5 5 5 5 5 5 5 4 9 9 9 
        9 9 9 9 5 5 f f f f f 5 5 4 9 9 
        9 9 9 9 9 5 5 f f a 3 5 5 5 5 9 
        9 9 9 9 9 4 5 5 5 a 3 5 5 5 5 9 
        9 9 9 9 4 5 5 5 5 3 3 9 4 5 5 4 
        9 9 9 4 5 5 5 9 9 3 3 9 9 9 5 5 
        9 9 9 4 5 5 9 9 9 9 9 9 9 9 9 9 
        9 9 9 5 9 9 9 9 9 9 9 9 9 9 9 9 
        `, SpriteKind.Collectible)
    tiles.placeOnTile(starman, value4)
}
let altimeter = textsprite.create("", 0, 3)
altimeter.setFlag(SpriteFlag.RelativeToCamera, true)
altimeter.setPosition(34, 14)
let trick_text = textsprite.create("")
trick_text.setFlag(SpriteFlag.RelativeToCamera, true)
let trick_text_line_2 = textsprite.create("")
trick_text_line_2.setFlag(SpriteFlag.RelativeToCamera, true)
let lame_text = textsprite.create("", 0, 2)
lame_text.setFlag(SpriteFlag.RelativeToCamera, true)
game.onUpdate(function () {
    if (GameStarted) {
        statusbar.setPosition(13, 27)
        statusbar.setFlag(SpriteFlag.RelativeToCamera, true)
    }
})
// console.log('End on Update Everytime')
game.onUpdate(function () {
    // console.log('Call on Update Everytime')
    dolphin.setPosition(dolphinBody.x, dolphinBody.y)
    if (areWeUnderTheSea && game.runtime() > controlLockEndTime) {
        if (controller.up.isPressed()) {
            if (controller.left.isPressed()) {
                moveTowardsAngle(225)
            } else if (controller.right.isPressed()) {
                moveTowardsAngle(315)
            } else {
                moveTowardsAngle(270)
            }
        } else if (controller.down.isPressed()) {
            if (controller.left.isPressed()) {
                moveTowardsAngle(135)
            } else if (controller.right.isPressed()) {
                moveTowardsAngle(45)
            } else {
                moveTowardsAngle(90)
            }
        } else if (controller.left.isPressed()) {
            moveTowardsAngle(180)
        } else if (controller.right.isPressed()) {
            moveTowardsAngle(0)
        } else {
            currentSpeed = 90
        }
    } else {
        currentSpeed = 90
        direction = Math.round(Math.map(Math.atan2(dolphinBody.vy, dolphinBody.vx), -3.14, 3.14, -180, 180))
        if (direction < 0) {
            direction += 360
        }
    }
    if (!(doingATrick)) {
        dolphin.setImage(dolphin_image[Math.round(Math.map((direction + 15) % 360, 0, 360, 0, 7))])
    }
})
game.onUpdateInterval(15000, function () {
    if (GameStarted) {
        statusbar.value += 1
    }
})
game.onUpdateInterval(2000, function () {
    // console.log('createEdibleFish End')
    if (sprites.allOfKind(SpriteKind.Food).length < 20) {
        // console.log('Start createEdibleFish')
        createEdibleFish()
    }
})
// // console.log('onUpdateInterval 5000')
// bird = sprites.create(img`
// . . . . . . . . f f f f . . . .
// . . . . . . . . f f f f f . . .
// . . . . . . . f f f 1 f f . . .
// . . . . 1 1 f f 1 1 1 1 f f . .
// . . . 1 1 1 f f 1 1 1 1 f f . .
// . . 1 f 1 1 f f f 1 1 f f . 1 1
// 4 1 1 f 1 1 1 f f f f f 1 1 1 1
// 4 1 1 1 1 1 1 1 1 f f f 1 . . .
// 4 4 d 1 1 1 1 1 1 1 1 1 1 . . .
// . . d d 1 1 1 1 1 1 1 1 1 . . .
// . . . d d d 1 1 1 1 1 1 1 1 . .
// . . . . . . . d 1 1 1 1 1 1 1 .
// . . . . . . . . d d 1 1 4 1 1 4
// . . . . . . . . . d 1 1 1 4 4 .
// . . . . . . . . . . . . . . 4 4
// . . . . . . . . . . . . . . . .
// `, SpriteKind.Bird)
// animation.runImageAnimation(
// bird,
// [img`
// . . . . . . . . f f f f . . . .
// . . . . . . . . f f f f f . . .
// . . . . . . . f f f 1 f f . . .
// . . . . 1 1 f f 1 1 1 1 f f . .
// . . . 1 1 1 f f 1 1 1 1 f f . .
// . . 1 f 1 1 f f f 1 1 f f . 1 1
// 4 1 1 f 1 1 1 f f f f f 1 1 1 1
// 4 1 1 1 1 1 1 1 1 f f f 1 . . .
// 4 4 d 1 1 1 1 1 1 1 1 1 1 . . .
// . . d d 1 1 1 1 1 1 1 1 1 . . .
// . . . d d d 1 1 1 1 1 1 1 1 . .
// . . . . . . . d 1 1 1 1 1 1 1 .
// . . . . . . . . d d 1 1 4 1 1 4
// . . . . . . . . . d 1 1 1 4 4 .
// . . . . . . . . . . . . . . 4 4
// . . . . . . . . . . . . . . . .
// `,img`
// . . . . . . . . . . . . . . . .
// . . . . . . . . . . . . . . . .
// . . . . . . . . . . . . . . . .
// . . . . 1 1 1 1 . . . . . . . .
// . . . 1 1 1 1 1 1 1 . . . . . .
// . . 1 f 1 1 1 1 1 1 1 1 . . 1 1
// 4 1 1 f 1 1 1 f 1 1 1 1 1 1 1 1
// 4 1 1 1 1 1 1 f f f 1 1 1 . . .
// 4 4 d 1 1 1 1 f f f f 1 1 . . .
// . . d d 1 1 1 f f f f 1 1 . . .
// . . . d d d 1 f f f f 1 1 1 . .
// . . . . . . f f f f f 1 1 1 1 .
// . . . . . . f f f f f 1 4 1 1 4
// . . . . . . f f f f 1 1 1 4 4 .
// . . . . . . f . . . . . . . 4 4
// . . . . . . . . . . . . . . . .
// `],
// 500,
// true
// )
// tiles.placeOnRandomTile(bird, assets.tile`tile3`)
// bird.right = 864
// bird.vx = -70
// bird.setFlag(SpriteFlag.DestroyOnWall, true)
// // console.log('onUpdateInterval 5000 End')
game.onUpdateInterval(50000, function () {
	
})
game.onUpdateInterval(500, function () {
    if (!(Music_Playing)) {
        timer.background(function () {
            music.setTempo(120)
            music.setVolume(100)
            Music_Playing = true
            Music()
            Music_Playing = false
        })
    }
})
game.onUpdateInterval(500, function () {
    if (GameStarted) {
        if (statusbar.value == 0) {
            GameStarted = false
            if (areWeUnderTheSea) {
                do_score()
            }
            game.over(false)
        }
    }
})
game.onUpdateInterval(100, function () {
    if (!(areWeUnderTheSea)) {
        altimeter.setText("" + Math.floor((648 - dolphin.y) / 16) + "." + Math.trunc((648 - dolphin.y) / 1.6) % 10 + "m")
        altimeter.left = 2
        altimeter.top = 2
    } else {
        altimeter.setText("")
    }
})
